<div>
  <div data-dojo-type="dijit.layout.StackContainer" data-dojo-attach-point="container" data-dojo-props="doLayout:false">

    <div data-dojo-type="dijit.Dialog" data-dojo-attach-point="loginDialog" data-dojo-props="">
      <div data-dojo-type="hotplate.hotDojoAuth.LoginForm" data-dojo-attach-point="loginForm"></div>
    </div>

    <div data-dojo-type="dijit.layout.ContentPane" data-dojo-attach-point="registerAsAnon">
      <div class="registerMessage">
        You will create a new user <i>and</i> a new workspace. If you already have a user, <a href="#" data-dojo-attach-event="onclick:_loginAndSwap">login</a> first!
      </div>
      <div data-dojo-type="hotplate.hotDojoWidgets.AlertBar" data-dojo-attach-point="alertBarAsAnon"></div>
      <form data-dojo-type="dijit.form.Form" data-dojo-attach-point="formAsAnon" method="POST">
    
        <label for="${id}_workspace_name">Workspace name</label>
        <input name="workspace" id="${id}_workspace_name" data-dojo-attach-point="workspaceAsAnon" data-dojo-type="hotplate.hotDojoAuth.ValidationWorkspace" data-dojo-props="required: true, ajaxOkWhen:'absent', ajaxInvalidMessage:'Workspace taken!'" />

        <label for="${id}_registerEmail">Email</label>
        <input name="registerEmail" id="${id}_registerEmail" data-dojo-attach-point="registerEmail" data-dojo-type="hotplate.hotDojoAuth.ValidationEmail" />
        <label for="${id}_login">Login</label>
        <input name="login" id="${id}_login" data-dojo-attach-point="login" data-dojo-type="hotplate.hotDojoAuth.ValidationUsername" data-dojo-props="required: true, ajaxOkWhen:'absent', ajaxInvalidMessage:'Username taken!'" />
        <label for="${id}_password0">Password</label>
        <input name="password" type="password" id="${id}_password0" data-dojo-attach-point="password0" data-dojo-type="hotplate.hotDojoAuth.ValidationPassword" />
        <label for="${id}_password1">Confirm password</label>
        <input name="password" type="password" id="${id}_password1" data-dojo-attach-point="password1" data-dojo-type="hotplate.hotDojoAuth.ValidationPassword" />
        <input type="submit" data-dojo-attach-point="buttonAsAnon" data-dojo-type="hotplate.hotDojoWidgets.BusyButton" label="Create!" />
      </form>
    </div>

    <div data-dojo-type="dijit.layout.ContentPane" data-dojo-attach-point="registerAsUser">
      <div class="registerMessage">
        Hi <strong>${login}</strong>! You are currently logged in. Your workspace will be registered under your existing username, <strong>${login}</strong>. You can <a href="#" data-dojo-attach-event="onclick:_logoutAndSwap">logout</a> if you like!
      </div>
      <div data-dojo-type="hotplate.hotDojoWidgets.AlertBar" data-dojo-attach-point="alertBarAsUser"></div>
      <form data-dojo-type="dijit.form.Form" data-dojo-attach-point="formAsUser" method="POST">
        <label for="${id}_workspace_anon">Workspace name</label>
        <input name="workspace" id="${id}_workspace_anon" data-dojo-attach-point="workspaceAsUser" data-dojo-type="hotplate.hotDojoAuth.ValidationWorkspace" data-dojo-props="required: true, ajaxOkWhen:'absent', ajaxInvalidMessage:'Workspace taken!'"/>
        <input type="submit" data-dojo-attach-point="buttonAsUser" data-dojo-type="hotplate.hotDojoWidgets.BusyButton" label="Create!" />
      </form>     
    </div>

  </div>
</div>
