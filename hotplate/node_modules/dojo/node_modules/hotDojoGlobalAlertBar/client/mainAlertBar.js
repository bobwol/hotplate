
require([
  'dojo/topic',
  'dojo/_base/window',

  'hotplate/hotDojoWidgets/AlertBar',

  //"hotplate/hotDojoHooks/SyncTopic",
  //"hotplate/hotDojoHooks/SyncSubscriber!hotplate/hotDojoWidgetHooks/postCreate/after/registerForm|mainAlertBar",

  ], 
  function(
    topic
  , win

  , AlertBar
  , SyncTopic
){
  // console.log("In mainAlertBar.js");

  globalAlertBar = new AlertBar( { background: '#FF4444' } );
  globalAlertBar.placeAt( document.body, 'first' );
  globalAlertBar.startup();

  topic.subscribe('globalAlert', function( message, displayFor ){
    displayFor = displayFor || 2500;
    globalAlertBar.set( 'message', message );
    globalAlertBar.show( displayFor );
  });

  //// This is here to test out SyncTopic
  ////Sync.incSubscriber('hotplate/hotDojoWidgetHooks/postCreate/after/registerForm');
  //topic.subscribe('hotplate/hotDojoWidgetHooks/postCreate/after/registerForm', function( widget ) {
  //  console.log("Subscribe in manAlertBar happened ");
  //});
  //SyncTopic.ready('hotplate/hotDojoWidgetHooks/postCreate/after/registerForm');

});


