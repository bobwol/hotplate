
define([
     "dojo/_base/declare",
     "dojo/topic",
     "hotplate/hotDojoStores/stores",

     "dojo/domReady!",
   ], function(
   declare
   , topic
   , stores
 ){

  var r = {};
  var userConfigStore      = stores('userConfig',      { workspaceIdCall: vars['hotDojoAppContainer']['workspaceId'] } ),
      workspaceConfigStore = stores('workspaceConfig', { workspaceIdCall: vars['hotDojoAppContainer']['workspaceId'] } ),
      accessConfigStore    = stores('accessConfig',    { workspaceIdCall: vars['hotDojoAppContainer']['workspaceId'] } );


  userConfigStore.memCache.put( vars.bd.userSettings );
  userConfigStore.memCache.query({ _id: 'self' } )
    .observe(function(item, removedIndex, insertedIndex){
      topic.publish('configChange/user', item );
    });

  workspaceConfigStore.memCache.put( vars.bd.workspaceSettings );
  workspaceConfigStore.memCache.query({ _id: 'self' } )
    .observe(function(item, removedIndex, insertedIndex){
      topic.publish('configChange/workspace', item );
    });

  accessConfigStore.memCache.put( vars.bd.accessSettings );
  accessConfigStore.memCache.query({ _id: 'self' } )
    .observe(function(item, removedIndex, insertedIndex){
      topic.publish('configChange/access', item );
    });



  return {};

});


