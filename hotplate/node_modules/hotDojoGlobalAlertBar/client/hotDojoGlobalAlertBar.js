
require([
  'dojo/topic',
  'dojo/_base/window',

  'hotplate/hotDojoWidgets/AlertBar'

  ], 
  function(
    topic
  , win

  , AlertBar
){


  globalAlertBar = new AlertBar( { background: '#FF4444' } );
  globalAlertBar.placeAt( document.body, 'first' );
  globalAlertBar.startup();

  console.log("globalAlertBar widget STARTED");

  topic.subscribe('globalAlert', function( message, displayFor ){
    displayFor = displayFor || 2500;
    console.log("globalAlertBar TOPIC arrived");
    globalAlertBar.set( 'message', message );
    globalAlertBar.show( displayFor );
  });

});


