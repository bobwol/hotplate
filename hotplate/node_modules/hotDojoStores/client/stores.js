define([
  'hotplate/hotDojoStores/JsonRest',
  'dojo/domReady!',
  ],function(
  JsonRest
  ){

  var stores = function( storeName, hash ){

    // If the global variable for the stores is defined...
    if(
      typeof( vars ) == 'object' &&
      typeof( vars.hotStoresVars ) == 'object' &&
      typeof( vars.hotStoresVars.stores ) == 'object'
    ){

      var definedStores = vars.hotStoresVars.stores;
      if( typeof( definedStores[storeName]) != 'undefined' ){

        definedStore = definedStores[storeName];

        target = definedStore.target;

        // Replace from the passed hash
        for(var k in hash){
          target = target.replace(':' + k, hash[k]);
        }

        // Create the store
        return new JsonRest({
          target: target,
	  	  	idProperty: definedStore.idProperty,
          sortParam: definedStore.sortParam,
        });
      }
    }
  }

  return stores;

});

