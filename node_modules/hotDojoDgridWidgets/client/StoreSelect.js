define([
   "dojo/_base/declare",
   "dojo/when",
   "dojo/topic",
   "dojo/on",
   "dojo/_base/lang",
   "dojo/dom-construct",
   "dojo/dom-style",
   "dojo/dom-attr",
   "dojo/aspect",

   "dijit/_WidgetBase",
   "dijit/Dialog",
   "dijit/_OnDijitClickMixin",
   "dijit/focus",
   "dijit/form/Button",

   'dgrid/List',
   'dgrid/OnDemandList',
   "dgrid/Selection",
   "dgrid/Keyboard",
   "dgrid/util/mouse",
   'put-selector/put',

   "hotplate/hotDojoSubmit/defaultSubmit",
   "hotplate/hotDojoWidgets/BusyButton",
   "hotplate/hotDojoWidgets/ConfirmDialog",

   ], function(
     declare
     , when
     , topic
     , on
     , lang
     , domConstruct
     , domStyle
     , domAttr
     , aspect

     , _WidgetBase
     , Dialog
     , _OnDijitClickMixin
     , focusUtil
     , Button

     , List
     , OnDemandList
     , Selection
     , Keyboard
     , mouse
     , put

     , ds
     , BusyButton
     , ConfirmDialog

 ){


    return declare( _WidgetBase, {

      // Store
      storeName: '',
      store: null,

      listWidget: null,

      constructor: function( params ){
        // this.store = stores( params.storeName, params.storeFields );
      },

      // Proxy method for listwidget.row()
      row: function( p ){
        return this.listWidget.row( p );
      },


      buildRendering: function(){

        var self = this;
        var ListConstructor = declare( [List, Selection, Keyboard ] );

        this.listWidget = new ListConstructor( { store: this.store } );
        this.domNode = put( 'div' );
        put( this.domNode, this.listWidget.domNode );

        this.inherited(arguments); 

      },

      resize: function(){
        this.listWidget.resize();

        this.inherited(arguments); 
      },

      destroy: function(){
        this.listWidget.destroy();

        this.inherited(arguments); 
      },

      postCreate: function(){

        this.inherited(arguments); 
        var self = this;       

        put( this.domNode, '.dgrid-select' );
        // ...

      },


      startup: function(){
        this.inherited(arguments); 
        this.listWidget.startup();
      },

    });
 

});

