var 
  dummy

, hotplate =  require('hotplate')
, path = require('path')

;

// Some sane defaults
hotplate.config.set( 'hotDojoDgridWidgets.dgrid-theme', 'claro' );

hotplate.hotEvents.on( 'enrichDojoConf', 'hotDojoDgridWidgets',  function( conf, done ){

  var p = path.join( hotplate.config.get( 'hotplate.staticUrlPath' ), 'hotDojoDgridWidgets' );

  conf.packages.push( { name: 'dgrid', location: path.join( p, 'dgrid') } );
  conf.packages.push( { name: 'put-selector', location: path.join( p, 'put-selector') } );
  conf.packages.push( { name: 'xstyle', location: path.join( p, 'xstyle' ) } );

  done( null );
});


hotplate.hotEvents.on( 'pageElements', 'hotDojoDgridWidgets', hotplate.cachable( function( done ){

  var theme;
  if( ! ( theme = hotplate.config.get('hotDojoDgridWidgets.dgrid-theme' ) ) ) theme = 'claro';

  // Sending the page out
  done( null, {
    csses: ['dgrid/css/skins/' + theme + '.css', 'EditableList.css', 'StoreSelect.css' ],
  });

}));


// Simply activate path to client files
hotplate.hotEvents.on( 'clientPaths', 'hotDojoDgridWidgets', function( done ){
  done( null, [ path.join(__dirname, '../client') ] );
})
    

